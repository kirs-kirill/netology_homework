## Создание облачной инфраструктуры

1. [Создание сервисного аккаунта с правами записи, бакета и YDB](./sas3/)
      <details>
        $  yc iam service-account list
        +----------------------+--------+--------+---------------------+-----------------------+
        |          ID          |  NAME  | LABELS |     CREATED AT      | LAST AUTHENTICATED AT |
        +----------------------+--------+--------+---------------------+-----------------------+
        | ajefusv8dspj2egupq51 | diplom |        | 2025-07-01 16:59:06 | 2025-07-02 04:40:00   |
        | ajev6fmmk9cib5ve79vo | hw-02  |        | 2024-11-14 07:22:47 | 2025-07-02 04:40:00   |
        +----------------------+--------+--------+---------------------+-----------------------+

        $ yc storage bucket list
        +------------------------+----------------------+------------+-----------------------+---------------------+
        |          NAME          |      FOLDER ID       |  MAX SIZE  | DEFAULT STORAGE CLASS |     CREATED AT      |
        +------------------------+----------------------+------------+-----------------------+---------------------+
        | kirsanov-diplom-bucket | b1g65ggbv0fmdj4bp782 | 1073741824 | COLD                  | 2025-07-01 16:59:10 |
        +------------------------+----------------------+------------+-----------------------+---------------------+

        $ yc ydb database list
        +----------------------+------------+-------------+---------------------+---------+
        |          ID          |    NAME    | DESCRIPTION |     CREATED AT      | STATUS  |
        +----------------------+------------+-------------+---------------------+---------+
        | etn2ham56gk5jef68o0i | diplom-ydb |             | 2025-07-01 16:59:06 | RUNNING |
        +----------------------+------------+-------------+---------------------+---------+
      </details>
2. [Подготовьте backend для Terraform](./sas3/)
3. [Создайте конфигурацию Terrafrom, используя созданный бакет ранее как бекенд для хранения стейт файла.](./backend/providers.tf)
    ```
    terraform init -backend-config="access_key=$ACCESS_KEY" -backend-config="secret_key=$SECRET_KEY" -reconfigure
    ```
4. [Создайте VPC с подсетями в разных зонах доступности.](./backend/vpc.tf)

      <details>

        $ yc vpc network list
        +----------------------+----------------+
        |          ID          |      NAME      |
        +----------------------+----------------+
        | enpov1n3be2ep0cm93ke | diplom-network |
        +----------------------+----------------+

        $ yc vpc subnet list
        +----------------------+----------+----------------------+----------------+---------------+-------------------+
        |          ID          |   NAME   |      NETWORK ID      | ROUTE TABLE ID |     ZONE      |       RANGE       |
        +----------------------+----------+----------------------+----------------+---------------+-------------------+
        | e2lupvcnjcamrfhkp525 | subnet_b | enpov1n3be2ep0cm93ke |                | ru-central1-b | [192.168.20.0/24] |
        | e9br8gqgfr9hepkt2aep | subnet_a | enpov1n3be2ep0cm93ke |                | ru-central1-a | [192.168.10.0/24] |
        | fl8qi7ee7qgfi7e7duhg | subnet_d | enpov1n3be2ep0cm93ke |                | ru-central1-d | [192.168.30.0/24] |
        +----------------------+----------+----------------------+----------------+---------------+-------------------+
      </details>

5. Убедитесь, что теперь вы можете выполнить команды terraform destroy и terraform apply без дополнительных ручных действий.

    `terraform destroy` и `terraform apply` нормально проходят с ключом `--auto-approve`.